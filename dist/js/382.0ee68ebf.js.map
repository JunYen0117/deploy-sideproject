{"version":3,"file":"js/382.0ee68ebf.js","mappings":"ybAMA,MAAM,QAAEA,IAAYC,EAAAA,EAAAA,KAGpB,IAAIC,EAAM,GACV,MAAMC,GAASC,EAAAA,EAAAA,IAAI,IAEbC,GAAgBD,EAAAA,EAAAA,IAAI,sBAEpBE,GAAUF,EAAAA,EAAAA,IAAI,IAEdG,GAAcC,EAAAA,EAAAA,KAAS,IACpBH,EAAcI,MAAQH,EAAQG,QAGvC,SAASC,IACPJ,EAAQG,MAAQP,EAAIS,MAAM,GAAGC,KAC7B,MAAMC,GAAaC,EAAAA,EAAAA,IAAYd,EAASO,EAAYE,QAEpDM,EAAAA,EAAAA,IAAYF,EAAYX,EAAIS,MAAM,IAC/BK,MAAK,KACJC,QAAQC,IAAI,SAAS,IAEtBC,OAAOC,IACNH,QAAQC,IAAI,YACZD,QAAQC,IAAIE,EAAM,IAEnBJ,MAAK,KACJK,EAAOR,EAAW,GAExB,CAEA,SAASQ,EAAQjB,GACf,MAAMS,EAAaT,GACnBkB,EAAAA,EAAAA,IAAeT,GACZG,MAAMO,IACLpB,EAAOM,MAAQc,EACfN,QAAQC,IAAI,WAAW,IAExBC,OAAM,KACLF,QAAQC,IAAI,WAAW,GAE7B,C,OAEAM,EAAAA,EAAAA,KAAU,KACRtB,EAAMuB,SAASC,cAAc,QAAQ,I,6NC/CvC,MAAMC,EAAc,EAEpB,O","sources":["webpack://my-sideproject/./src/views/TestTest3.vue","webpack://my-sideproject/./src/views/TestTest3.vue?0222"],"sourcesContent":["<script setup>\r\n// firebase storage 上傳圖片\r\nimport { ref, onMounted, computed } from 'vue'\r\nimport { dataBase } from '@/composables/db.js'\r\nimport { ref as firebaseRef, uploadBytes, getDownloadURL } from 'firebase/storage'\r\n\r\nconst { storage } = dataBase()\r\n\r\n// doc == <input>欄位\r\nlet doc = ''\r\nconst imgSrc = ref('')\r\n// firebase資料夾路徑\r\nconst storageFolder = ref('products_img/test/')\r\n// 要上傳的檔案名稱\r\nconst imgName = ref('')\r\n// sotrage路徑 = 資料夾路徑 + 檔案名稱\r\nconst storagePath = computed(() => {\r\n  return storageFolder.value + imgName.value\r\n})\r\n\r\nfunction upload () {\r\n  imgName.value = doc.files[0].name\r\n  const storageRef = firebaseRef(storage, storagePath.value)\r\n\r\n  uploadBytes(storageRef, doc.files[0])\r\n    .then(() => {\r\n      console.log('上傳檔案成功')\r\n    })\r\n    .catch((error) => {\r\n      console.log('上傳檔案失敗了：')\r\n      console.log(error)\r\n    })\r\n    .then(() => {\r\n      getURL(storageRef)\r\n    })\r\n}\r\n\r\nfunction getURL (ref) {\r\n  const storageRef = ref\r\n  getDownloadURL(storageRef)\r\n    .then((url) => {\r\n      imgSrc.value = url\r\n      console.log('取得圖片路徑成功')\r\n    })\r\n    .catch(() => {\r\n      console.log('取得圖片路徑失敗')\r\n    })\r\n}\r\n\r\nonMounted(() => {\r\n  doc = document.querySelector('.file')\r\n})\r\n</script>\r\n\r\n<template>\r\n  <div>\r\n    <label for=\"formFileMultiple\" class=\"form-label\">Multiple files input example</label>\r\n    <input class=\"form-control file\" type=\"file\" id=\"formFile\">\r\n    <button @click=\"checkFile\">check</button>\r\n    <button @click=\"upload\">upload</button>\r\n    <img :src=\"imgSrc\" alt=\"\">\r\n  </div>\r\n</template>\r\n","import script from \"./TestTest3.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./TestTest3.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["storage","dataBase","doc","imgSrc","ref","storageFolder","imgName","storagePath","computed","value","upload","files","name","storageRef","firebaseRef","uploadBytes","then","console","log","catch","error","getURL","getDownloadURL","url","onMounted","document","querySelector","__exports__"],"sourceRoot":""}